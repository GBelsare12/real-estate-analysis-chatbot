{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gayat\\\\real-estate-chatbot\\\\frontend\\\\src\\\\RealEstateChatbot.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from 'chart.js';\nimport { Line } from 'react-chartjs-2';\nimport { FaChartLine, FaHome, FaMoon, FaDownload, FaSearch, FaUpload, FaFileExcel, FaTimesCircle } from \"react-icons/fa\";\n\n// Register Chart.js components required for the Line chart\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\n\n// --- Global Config & Utility ---\nconst API_BASE = \"http://127.0.0.1:8000/api\";\n\n// API Call for Query\nconst fetchQuery = async query => {\n  try {\n    const res = await axios.post(`${API_BASE}/query/`, {\n      query,\n      use_llm: false\n    });\n    return res.data;\n  } catch (error) {\n    var _error$response, _error$response$data;\n    console.error(\"API Fetch Error:\", error.response ? error.response.data : error.message);\n    const errorMsg = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || \"Could not connect to Django API. Check your backend terminal.\";\n    throw new Error(errorMsg);\n  }\n};\n\n// API Call for Upload\nconst uploadDataset = async file => {\n  const formData = new FormData();\n  formData.append('file', file);\n  try {\n    const res = await axios.post(`${API_BASE}/upload/`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    return res.data;\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    console.error(\"Upload Error:\", error.response ? error.response.data : error.message);\n    const errorMsg = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || \"Upload failed. Ensure file is .xlsx or .csv.\";\n    throw new Error(errorMsg);\n  }\n};\nconst CHART_COLORS = ['rgb(79, 70, 229)',\n// Indigo\n'rgb(239, 68, 68)',\n// Red\n'rgb(16, 185, 129)',\n// Emerald\n'rgb(245, 158, 11)',\n// Amber\n'rgb(59, 130, 246)' // Blue\n];\n\n// --- 2. Shared Components ---\n\n// Loader Component\nconst Loader = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"flex justify-center items-center p-8\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500 dark:border-indigo-300\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n    className: \"ml-3 text-gray-600 dark:text-gray-400\",\n    children: \"Processing query... This may take a moment.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 60,\n  columnNumber: 5\n}, this);\n\n// File Upload Component (NEW)\n_c = Loader;\nconst FileUpload = ({\n  setLoading,\n  setNotification\n}) => {\n  _s();\n  const fileInputRef = useRef(null);\n  const handleFileChange = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    setNotification({\n      message: `Uploading ${file.name}...`,\n      type: 'info'\n    });\n    setLoading(true);\n    try {\n      const res = await uploadDataset(file);\n      setNotification({\n        message: res.message + \" Please submit a new query.\",\n        type: 'success'\n      });\n    } catch (error) {\n      setNotification({\n        message: error.message,\n        type: 'error'\n      });\n    }\n    setLoading(false);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\"; // Clear file input\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"text-sm font-semibold text-gray-300 mb-2\",\n      children: \"Dataset Source\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      ref: fileInputRef,\n      onChange: handleFileChange,\n      accept: \".xlsx,.xls,.csv\",\n      className: \"hidden\",\n      id: \"file-upload\"\n      // The issue here is the disabled prop usage. Fixed in file block.\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"file-upload\",\n      className: \"w-full cursor-pointer p-2 rounded-lg text-sm transition duration-200 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold flex justify-center items-center shadow-md\",\n      children: [/*#__PURE__*/_jsxDEV(FaUpload, {\n        className: \"w-4 h-4 mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), \" Upload New Dataset\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xs text-gray-400 mt-1\",\n      children: \"Accepts .xlsx, .xls, .csv\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 9\n  }, this);\n};\n\n// Sidebar Component (Includes File Upload and Dark/Light Mode Toggle)\n_s(FileUpload, \"YQqvMxdmg33cmOXmQcOjJm+FLVI=\");\n_c2 = FileUpload;\nconst Sidebar = ({\n  isDark,\n  toggleDark,\n  setLoading,\n  setNotification\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: `fixed h-full w-64 p-5 flex flex-col ${isDark ? 'bg-gray-900 text-gray-100' : 'bg-gray-800 text-white'} shadow-2xl z-10 transition-colors duration-300`,\n  children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n    className: \"text-xl font-bold mb-8 flex items-center\",\n    children: [/*#__PURE__*/_jsxDEV(FaHome, {\n      className: \"w-6 h-6 mr-2 text-indigo-400\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), \"Real Estate AI\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex-grow\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center p-3 rounded-lg bg-indigo-700 font-medium transition duration-150\",\n      children: [/*#__PURE__*/_jsxDEV(FaChartLine, {\n        className: \"mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), \" Dashboard\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FileUpload, {\n      setLoading: setLoading,\n      setNotification: setNotification\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8 text-xs text-gray-400\",\n      children: \"Project Status: Running\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: toggleDark,\n    className: \"w-full mt-4 p-2 rounded-lg text-sm transition duration-200 hover:bg-indigo-700 bg-indigo-600 text-white font-semibold flex justify-center items-center shadow-md\",\n    children: [/*#__PURE__*/_jsxDEV(FaMoon, {\n      className: \"w-5 h-5 mr-2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }, this), isDark ? 'Light Mode' : 'Dark Mode']\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 113,\n  columnNumber: 5\n}, this);\n\n// QueryBox Component (Unchanged)\n_c3 = Sidebar;\nconst QueryBox = ({\n  onSubmit,\n  disabled\n}) => {\n  _s2();\n  const [query, setQuery] = useState(\"Compare Ambegaon Budruk and Aundh demand trends\");\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (query.trim() !== \"\") {\n      onSubmit(query);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"mb-8\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex space-x-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"flex-grow p-4 border border-gray-300 rounded-xl focus:ring-indigo-500 focus:border-indigo-500 shadow-lg text-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white transition duration-150\",\n        type: \"text\",\n        placeholder: \"E.g., Analyze Wakad price trends or Compare areas...\",\n        value: query,\n        onChange: e => setQuery(e.target.value),\n        disabled: disabled\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `px-8 py-3 rounded-xl text-white font-semibold text-lg transition duration-200 shadow-md ${disabled ? 'bg-gray-400 cursor-not-allowed' : 'bg-indigo-600 hover:bg-indigo-700'}`,\n        type: \"submit\",\n        disabled: disabled,\n        children: [/*#__PURE__*/_jsxDEV(FaSearch, {\n          className: \"inline-block mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }, this), \" Search\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 9\n  }, this);\n};\n\n// SummaryCard Component\n_s2(QueryBox, \"64I+5yjTY9twOzJgpYTDuzvtwyQ=\");\n_c4 = QueryBox;\nconst SummaryCard = ({\n  summary,\n  area\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"bg-white dark:bg-gray-800 shadow-xl rounded-xl p-6 mb-8 border border-indigo-400/50 transition-colors duration-300\",\n  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n    className: \"text-2xl font-bold text-indigo-600 dark:text-indigo-400 mb-4\",\n    children: [\"Analysis Summary: \", area || 'Loading...']\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"text-gray-700 dark:text-gray-300 whitespace-pre-line\",\n    children: summary || \"Submit a query to see the real estate analysis summary here.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 182,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 178,\n  columnNumber: 5\n}, this);\n\n// Shared function to handle chart download (Bonus Requirement)\n_c5 = SummaryCard;\nconst handleChartDownload = (chartRef, filename) => {\n  const chartInstance = chartRef.current;\n  if (chartInstance && chartInstance.toBase64Image) {\n    const imageURL = chartInstance.toBase64Image('image/png', 1.0);\n    const a = document.createElement('a');\n    a.href = imageURL;\n    a.download = `${filename}.png`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n  }\n};\n\n// Common function for chart options\nconst getChartOptions = (title, yAxesId) => {\n  const isDark = document.documentElement.classList.contains('dark');\n  const color = isDark ? 'rgb(156, 163, 175)' : 'rgb(107, 114, 128)';\n  const gridColor = 'rgba(209, 213, 219, 0.1)';\n  return {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        position: 'top',\n        labels: {\n          color: color\n        }\n      },\n      title: {\n        display: true,\n        text: title,\n        color: isDark ? 'rgb(209, 213, 219)' : 'rgb(55, 65, 81)'\n      }\n    },\n    scales: {\n      x: {\n        title: {\n          display: true,\n          text: 'Year',\n          color: color\n        },\n        ticks: {\n          color: color\n        },\n        grid: {\n          color: gridColor\n        }\n      },\n      yRate: {\n        type: 'linear',\n        display: true,\n        position: 'left',\n        title: {\n          display: true,\n          text: 'Avg Rate (INR)',\n          color: CHART_COLORS[0]\n        },\n        ticks: {\n          color: color\n        },\n        grid: {\n          color: gridColor\n        }\n      },\n      yDemand: {\n        type: 'linear',\n        display: yAxesId === 'yDemand',\n        // Only show demand axis if needed\n        position: 'right',\n        title: {\n          display: true,\n          text: 'Demand (Units)',\n          color: CHART_COLORS[1]\n        },\n        ticks: {\n          color: color\n        },\n        grid: {\n          drawOnChartArea: false\n        }\n      }\n    }\n  };\n};\n\n// Component for Single Area Analysis (Rates + Demand on one chart)\nconst TrendChart = ({\n  chart,\n  areaName\n}) => {\n  _s3();\n  const chartRef = useRef(null);\n  if (!chart || !chart.years || chart.years.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-8 bg-white dark:bg-gray-800 shadow-xl rounded-xl text-center text-gray-500 dark:text-gray-400\",\n      children: \"No trend data available for this query.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 16\n    }, this);\n  }\n  const chartData = {\n    labels: chart.years,\n    datasets: [{\n      label: \"Weighted Avg Rate (INR)\",\n      data: chart.rates.overall,\n      borderColor: CHART_COLORS[0],\n      backgroundColor: 'rgba(79, 70, 229, 0.2)',\n      borderWidth: 3,\n      tension: 0.3,\n      yAxisID: 'yRate'\n    }, {\n      label: \"Total Demand (Units Sold)\",\n      data: chart.demand,\n      borderColor: CHART_COLORS[1],\n      backgroundColor: 'rgba(239, 68, 68, 0.2)',\n      borderWidth: 3,\n      tension: 0.3,\n      yAxisID: 'yDemand'\n    }]\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white dark:bg-gray-800 shadow-xl rounded-xl p-6 mb-8 border border-indigo-400/50 transition-colors duration-300\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-gray-800 dark:text-gray-200\",\n        children: \"Price & Demand Trends\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleChartDownload(chartRef, `${areaName}_trend_chart`),\n        className: \"px-4 py-2 text-sm rounded-lg text-white bg-green-600 hover:bg-green-700 transition duration-150 flex items-center shadow-md\",\n        children: [/*#__PURE__*/_jsxDEV(FaDownload, {\n          className: \"w-4 h-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 21\n        }, this), \" Download Chart (PNG)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-[400px] w-full\",\n      children: /*#__PURE__*/_jsxDEV(Line, {\n        ref: chartRef,\n        data: chartData,\n        options: getChartOptions(`Price & Demand Trends for ${areaName}`, 'yDemand')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 283,\n    columnNumber: 9\n  }, this);\n};\n\n// Component for Multi-Area Comparison \n_s3(TrendChart, \"aW/6lq35noP8VJrK3G9P8gm4OYM=\");\n_c6 = TrendChart;\nconst ComparisonChart = ({\n  multiChartData,\n  areaNames\n}) => {\n  _s4();\n  const chartRef = useRef(null);\n  if (!multiChartData || multiChartData.length < 2) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-8 bg-white dark:bg-gray-800 shadow-xl rounded-xl text-center text-gray-500 dark:text-gray-400\",\n      children: \"Not enough data for comparison.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 16\n    }, this);\n  }\n  const allYears = multiChartData.flatMap(d => d.chart.years);\n  const uniqueYears = Array.from(new Set(allYears)).sort((a, b) => parseInt(a) - parseInt(b));\n  const datasets = multiChartData.map((data, index) => {\n    const rates = data.chart.rates.overall || [];\n    const areaYears = data.chart.years;\n    const rateMap = new Map(areaYears.map((year, i) => [year, rates[i]]));\n    const dataPoints = uniqueYears.map(year => rateMap.get(year) || null);\n    const colorIndex = index % CHART_COLORS.length;\n    return {\n      label: `${data.area} - Avg Rate`,\n      data: dataPoints,\n      borderColor: CHART_COLORS[colorIndex],\n      backgroundColor: CHART_COLORS[colorIndex].replace('rgb', 'rgba').replace(')', ', 0.2)'),\n      borderWidth: 3,\n      tension: 0.3,\n      yAxisID: 'yRate'\n    };\n  });\n  const chartData = {\n    labels: uniqueYears,\n    datasets: datasets\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white dark:bg-gray-800 shadow-xl rounded-xl p-6 mb-8 border border-indigo-400/50 transition-colors duration-300\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-gray-800 dark:text-gray-200\",\n        children: [\"Price Comparison: \", areaNames.join(' vs ')]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleChartDownload(chartRef, 'multi_area_comparison'),\n        className: \"px-4 py-2 text-sm rounded-lg text-white bg-green-600 hover:bg-green-700 transition duration-150 flex items-center shadow-md\",\n        children: [/*#__PURE__*/_jsxDEV(FaDownload, {\n          className: \"w-4 h-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 21\n        }, this), \" Download Chart (PNG)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-[400px] w-full\",\n      children: /*#__PURE__*/_jsxDEV(Line, {\n        ref: chartRef,\n        data: chartData,\n        options: getChartOptions(`Price Trends Comparison`, 'yRate')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 337,\n    columnNumber: 9\n  }, this);\n};\n\n// DataTable Component (Includes Download Table Button)\n_s4(ComparisonChart, \"aW/6lq35noP8VJrK3G9P8gm4OYM=\");\n_c7 = ComparisonChart;\nconst DataTable = ({\n  table\n}) => {\n  if (!table || table.length === 0) {\n    return null;\n  }\n  const headers = Object.keys(table[0]).filter(key => key !== 'id');\n\n  // Function to handle table download as CSV (Bonus Requirement)\n  const handleDownloadCSV = () => {\n    let csvContent = headers.map(h => `\"${h.split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')}\"`).join(',') + '\\n';\n    table.forEach(row => {\n      const rowData = headers.map(header => {\n        let value = row[header];\n        if (value === undefined || value === null) value = '';\n        return `\"${String(value).replace(/\"/g, '\"\"')}\"`;\n      }).join(',');\n      csvContent += rowData + '\\n';\n    });\n    const blob = new Blob([csvContent], {\n      type: 'text/csv;charset=utf-8;'\n    });\n    const link = document.createElement(\"a\");\n    const url = URL.createObjectURL(blob);\n    link.setAttribute(\"href\", url);\n    link.setAttribute(\"download\", \"real_estate_data_details.csv\");\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white dark:bg-gray-800 shadow-xl rounded-xl p-6 border border-indigo-400/50 transition-colors duration-300 overflow-x-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-gray-800 dark:text-gray-200\",\n        children: \"Filtered Detailed Data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDownloadCSV,\n        className: \"px-4 py-2 text-sm rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 transition duration-150 flex items-center shadow-md\",\n        children: [/*#__PURE__*/_jsxDEV(FaDownload, {\n          className: \"w-4 h-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 21\n        }, this), \" Download Table (CSV)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"min-w-full divide-y divide-gray-200 dark:divide-gray-700\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        className: \"bg-indigo-50 dark:bg-gray-700\",\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: headers.map(header => /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",\n            children: header.split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')\n          }, header, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        className: \"divide-y divide-gray-200 dark:divide-gray-700\",\n        children: table.map((row, rowIndex) => /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"hover:bg-indigo-50/50 dark:hover:bg-gray-700/50 transition-colors duration-150\",\n          children: headers.map(header => /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100\",\n            children: row[header] === undefined || row[header] === null ? '-' : String(row[header])\n          }, header, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 33\n          }, this))\n        }, rowIndex, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 388,\n    columnNumber: 9\n  }, this);\n};\n\n// --- 3. Main Application Component (App) ---\n_c8 = DataTable;\nconst App = () => {\n  _s5();\n  const [loading, setLoading] = useState(false);\n  const [summary, setSummary] = useState(\"\");\n  const [singleChartData, setSingleChartData] = useState(null);\n  const [comparisonData, setComparisonData] = useState(null); // New state for multi-area data\n  const [tableData, setTableData] = useState([]);\n  const [areaName, setAreaName] = useState(\"\");\n  const [error, setError] = useState(null);\n  const [isDark, setIsDark] = useState(true);\n  const [notification, setNotification] = useState(null); // State for upload messages\n\n  // Initial dark mode setup (using Tailwind's dark class)\n  useEffect(() => {\n    document.documentElement.classList.toggle('dark', isDark);\n  }, [isDark]);\n  const toggleDark = () => setIsDark(prev => !prev);\n  const handleQuery = async text => {\n    setError(null);\n    setNotification(null); // Clear notification on new query\n    setLoading(true);\n    setAreaName(\"Processing...\");\n    setComparisonData(null);\n    setSingleChartData(null);\n    try {\n      const res = await fetchQuery(text);\n      if (res.multi_chart_data) {\n        // Handle Comparison Response\n        setComparisonData(res.multi_chart_data);\n        setAreaName(`Comparison: ${res.comparison_areas.join(', ')}`);\n        setSummary(res.summary);\n        setTableData(res.table || []);\n      } else {\n        // Handle Single Area Response\n        setSingleChartData(res.chart);\n        setAreaName(res.area);\n        setSummary(res.summary);\n        setTableData(res.table);\n      }\n    } catch (e) {\n      console.error(\"Query Error:\", e.message);\n      setError(e.message);\n      setSummary(\"Could not perform the analysis. Please check your Django backend logs for errors or ensure the area name is valid.\");\n      setTableData([]);\n      setAreaName(\"Error\");\n    }\n    setLoading(false);\n  };\n\n  // Notification UI component inside App\n  const NotificationToast = () => {\n    if (!notification) return null;\n    const baseClass = \"fixed top-4 right-4 p-4 rounded-lg shadow-xl text-white flex items-center z-50 transition duration-300\";\n    let colorClass = \"\";\n    if (notification.type === 'success') {\n      colorClass = \"bg-green-600 border border-green-800\";\n    } else if (notification.type === 'error') {\n      colorClass = \"bg-red-600 border border-red-800\";\n    } else {\n      colorClass = \"bg-indigo-600 border border-indigo-800\";\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${baseClass} ${colorClass}`,\n      children: [/*#__PURE__*/_jsxDEV(FaTimesCircle, {\n        className: \"mr-2 cursor-pointer\",\n        onClick: () => setNotification(null)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: notification.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 13\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen flex bg-gray-50 dark:bg-gray-900 font-sans transition-colors duration-300\",\n    children: [/*#__PURE__*/_jsxDEV(NotificationToast, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Sidebar, {\n      isDark: isDark,\n      toggleDark: toggleDark,\n      setLoading: setLoading,\n      setNotification: setNotification\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 512,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex-grow ml-64 p-8\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"mb-10 pt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-3xl font-extrabold text-gray-900 dark:text-white\",\n            children: \"Real Estate Market Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-1 text-sm text-gray-500 dark:text-gray-400\",\n            children: \"Ask a question to analyze trends for any locality in the dataset.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(QueryBox, {\n          onSubmit: handleQuery,\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 21\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4 dark:bg-red-900/50 dark:border-red-600 dark:text-red-400\",\n          role: \"alert\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-bold\",\n            children: \"Error! \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"block sm:inline\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 534,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 25\n        }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [!areaName && !error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-8 text-center text-gray-500 dark:text-gray-400 border border-dashed border-gray-300 dark:border-gray-700 rounded-xl\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xl\",\n              children: \"Welcome! Submit a query like \\\"Analyze Wakad\\\" or \\\"Compare Ambegaon Budruk and Aundh\\\" to get started.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-2 text-sm\",\n              children: \"Make sure your Django server is running at *http://127.0.0.1:8000* and the *dataset.xlsx* file is accessible in your *data* folder.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 33\n          }, this), areaName && areaName !== \"Processing...\" && areaName !== \"Error\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(SummaryCard, {\n              summary: summary,\n              area: areaName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 554,\n              columnNumber: 37\n            }, this), comparisonData ? /*#__PURE__*/_jsxDEV(ComparisonChart, {\n              multiChartData: comparisonData,\n              areaNames: areaName.replace('Comparison: ', '').split(', ')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 41\n            }, this) : /*#__PURE__*/_jsxDEV(TrendChart, {\n              chart: singleChartData,\n              areaName: areaName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 563,\n              columnNumber: 41\n            }, this), !comparisonData && /*#__PURE__*/_jsxDEV(DataTable, {\n              table: tableData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 57\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 518,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 509,\n    columnNumber: 9\n  }, this);\n};\n_s5(App, \"v0yOpuqgBjYR0jdtT8d3CtaQCTI=\");\n_c9 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9;\n$RefreshReg$(_c, \"Loader\");\n$RefreshReg$(_c2, \"FileUpload\");\n$RefreshReg$(_c3, \"Sidebar\");\n$RefreshReg$(_c4, \"QueryBox\");\n$RefreshReg$(_c5, \"SummaryCard\");\n$RefreshReg$(_c6, \"TrendChart\");\n$RefreshReg$(_c7, \"ComparisonChart\");\n$RefreshReg$(_c8, \"DataTable\");\n$RefreshReg$(_c9, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Line","FaChartLine","FaHome","FaMoon","FaDownload","FaSearch","FaUpload","FaFileExcel","FaTimesCircle","jsxDEV","_jsxDEV","Fragment","_Fragment","register","API_BASE","fetchQuery","query","res","post","use_llm","data","error","_error$response","_error$response$data","console","response","message","errorMsg","Error","uploadDataset","file","formData","FormData","append","headers","_error$response2","_error$response2$data","CHART_COLORS","Loader","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","FileUpload","setLoading","setNotification","_s","fileInputRef","handleFileChange","e","target","files","name","type","current","value","ref","onChange","accept","id","htmlFor","_c2","Sidebar","isDark","toggleDark","onClick","_c3","QueryBox","onSubmit","disabled","_s2","setQuery","handleSubmit","preventDefault","trim","placeholder","_c4","SummaryCard","summary","area","_c5","handleChartDownload","chartRef","filename","chartInstance","toBase64Image","imageURL","a","document","createElement","href","download","body","appendChild","click","removeChild","getChartOptions","title","yAxesId","documentElement","classList","contains","color","gridColor","responsive","maintainAspectRatio","plugins","legend","position","labels","display","text","scales","x","ticks","grid","yRate","yDemand","drawOnChartArea","TrendChart","chart","areaName","_s3","years","length","chartData","datasets","label","rates","overall","borderColor","backgroundColor","borderWidth","tension","yAxisID","demand","options","_c6","ComparisonChart","multiChartData","areaNames","_s4","allYears","flatMap","d","uniqueYears","Array","from","Set","sort","b","parseInt","map","index","areaYears","rateMap","Map","year","i","dataPoints","get","colorIndex","replace","join","_c7","DataTable","table","Object","keys","filter","key","handleDownloadCSV","csvContent","h","split","word","charAt","toUpperCase","slice","forEach","row","rowData","header","undefined","String","blob","Blob","link","url","URL","createObjectURL","setAttribute","rowIndex","_c8","App","_s5","loading","setSummary","singleChartData","setSingleChartData","comparisonData","setComparisonData","tableData","setTableData","setAreaName","setError","setIsDark","notification","toggle","prev","handleQuery","multi_chart_data","comparison_areas","NotificationToast","baseClass","colorClass","role","_c9","$RefreshReg$"],"sources":["C:/Users/gayat/real-estate-chatbot/frontend/src/RealEstateChatbot.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from 'chart.js';\r\nimport { Line } from 'react-chartjs-2';\r\nimport { FaChartLine, FaHome, FaMoon, FaDownload, FaSearch, FaUpload, FaFileExcel, FaTimesCircle } from \"react-icons/fa\";\r\n\r\n// Register Chart.js components required for the Line chart\r\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\r\n\r\n// --- Global Config & Utility ---\r\nconst API_BASE = \"http://127.0.0.1:8000/api\";\r\n\r\n// API Call for Query\r\nconst fetchQuery = async (query) => {\r\n    try {\r\n        const res = await axios.post(`${API_BASE}/query/`, {\r\n            query,\r\n            use_llm: false, \r\n        });\r\n        return res.data;\r\n    } catch (error) {\r\n        console.error(\"API Fetch Error:\", error.response ? error.response.data : error.message);\r\n        const errorMsg = error.response?.data?.error || \"Could not connect to Django API. Check your backend terminal.\";\r\n        throw new Error(errorMsg);\r\n    }\r\n};\r\n\r\n// API Call for Upload\r\nconst uploadDataset = async (file) => {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    try {\r\n        const res = await axios.post(`${API_BASE}/upload/`, formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data',\r\n            },\r\n        });\r\n        return res.data;\r\n    } catch (error) {\r\n        console.error(\"Upload Error:\", error.response ? error.response.data : error.message);\r\n        const errorMsg = error.response?.data?.error || \"Upload failed. Ensure file is .xlsx or .csv.\";\r\n        throw new Error(errorMsg);\r\n    }\r\n};\r\n\r\n\r\nconst CHART_COLORS = [\r\n    'rgb(79, 70, 229)',  // Indigo\r\n    'rgb(239, 68, 68)',  // Red\r\n    'rgb(16, 185, 129)', // Emerald\r\n    'rgb(245, 158, 11)', // Amber\r\n    'rgb(59, 130, 246)', // Blue\r\n];\r\n\r\n// --- 2. Shared Components ---\r\n\r\n// Loader Component\r\nconst Loader = () => (\r\n    <div className=\"flex justify-center items-center p-8\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500 dark:border-indigo-300\"></div>\r\n        <span className=\"ml-3 text-gray-600 dark:text-gray-400\">Processing query... This may take a moment.</span>\r\n    </div>\r\n);\r\n\r\n// File Upload Component (NEW)\r\nconst FileUpload = ({ setLoading, setNotification }) => {\r\n    const fileInputRef = useRef(null);\r\n\r\n    const handleFileChange = async (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n\r\n        setNotification({ message: `Uploading ${file.name}...`, type: 'info' });\r\n        setLoading(true);\r\n        \r\n        try {\r\n            const res = await uploadDataset(file);\r\n            setNotification({ message: res.message + \" Please submit a new query.\", type: 'success' });\r\n        } catch (error) {\r\n            setNotification({ message: error.message, type: 'error' });\r\n        }\r\n        \r\n        setLoading(false);\r\n        if (fileInputRef.current) {\r\n            fileInputRef.current.value = \"\"; // Clear file input\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"mt-8\">\r\n            <h4 className=\"text-sm font-semibold text-gray-300 mb-2\">Dataset Source</h4>\r\n            <input\r\n                type=\"file\"\r\n                ref={fileInputRef}\r\n                onChange={handleFileChange}\r\n                accept=\".xlsx,.xls,.csv\"\r\n                className=\"hidden\"\r\n                id=\"file-upload\"\r\n                // The issue here is the disabled prop usage. Fixed in file block.\r\n            />\r\n            <label htmlFor=\"file-upload\" className=\"w-full cursor-pointer p-2 rounded-lg text-sm transition duration-200 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold flex justify-center items-center shadow-md\">\r\n                <FaUpload className=\"w-4 h-4 mr-2\" /> Upload New Dataset\r\n            </label>\r\n            <p className=\"text-xs text-gray-400 mt-1\">Accepts .xlsx, .xls, .csv</p>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// Sidebar Component (Includes File Upload and Dark/Light Mode Toggle)\r\nconst Sidebar = ({ isDark, toggleDark, setLoading, setNotification }) => (\r\n    <div className={`fixed h-full w-64 p-5 flex flex-col ${isDark ? 'bg-gray-900 text-gray-100' : 'bg-gray-800 text-white'} shadow-2xl z-10 transition-colors duration-300`}>\r\n        <h1 className=\"text-xl font-bold mb-8 flex items-center\">\r\n            <FaHome className=\"w-6 h-6 mr-2 text-indigo-400\" />\r\n            Real Estate AI\r\n        </h1>\r\n        \r\n        <div className=\"flex-grow\">\r\n            <div className=\"flex items-center p-3 rounded-lg bg-indigo-700 font-medium transition duration-150\">\r\n                <FaChartLine className=\"mr-2\" /> Dashboard\r\n            </div>\r\n            \r\n            <FileUpload setLoading={setLoading} setNotification={setNotification} />\r\n\r\n            <div className=\"mt-8 text-xs text-gray-400\">\r\n                Project Status: Running\r\n            </div>\r\n        </div>\r\n\r\n        <button \r\n            onClick={toggleDark}\r\n            className=\"w-full mt-4 p-2 rounded-lg text-sm transition duration-200 hover:bg-indigo-700 bg-indigo-600 text-white font-semibold flex justify-center items-center shadow-md\"\r\n        >\r\n            <FaMoon className=\"w-5 h-5 mr-2\" />\r\n            {isDark ? 'Light Mode' : 'Dark Mode'}\r\n        </button>\r\n    </div>\r\n);\r\n\r\n\r\n// QueryBox Component (Unchanged)\r\nconst QueryBox = ({ onSubmit, disabled }) => {\r\n    const [query, setQuery] = useState(\"Compare Ambegaon Budruk and Aundh demand trends\");\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        if (query.trim() !== \"\") {\r\n            onSubmit(query);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"mb-8\">\r\n            <div className=\"flex space-x-3\">\r\n                <input\r\n                    className=\"flex-grow p-4 border border-gray-300 rounded-xl focus:ring-indigo-500 focus:border-indigo-500 shadow-lg text-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white transition duration-150\"\r\n                    type=\"text\"\r\n                    placeholder=\"E.g., Analyze Wakad price trends or Compare areas...\"\r\n                    value={query}\r\n                    onChange={(e) => setQuery(e.target.value)}\r\n                    disabled={disabled}\r\n                />\r\n                <button\r\n                    className={`px-8 py-3 rounded-xl text-white font-semibold text-lg transition duration-200 shadow-md ${disabled ? 'bg-gray-400 cursor-not-allowed' : 'bg-indigo-600 hover:bg-indigo-700'}`}\r\n                    type=\"submit\"\r\n                    disabled={disabled}\r\n                >\r\n                    <FaSearch className=\"inline-block mr-2\" /> Search\r\n                </button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\n// SummaryCard Component\r\nconst SummaryCard = ({ summary, area }) => (\r\n    <div className=\"bg-white dark:bg-gray-800 shadow-xl rounded-xl p-6 mb-8 border border-indigo-400/50 transition-colors duration-300\">\r\n        <h2 className=\"text-2xl font-bold text-indigo-600 dark:text-indigo-400 mb-4\">\r\n            Analysis Summary: {area || 'Loading...'}\r\n        </h2>\r\n        <p className=\"text-gray-700 dark:text-gray-300 whitespace-pre-line\">\r\n            {summary || \"Submit a query to see the real estate analysis summary here.\"}\r\n        </p>\r\n    </div>\r\n);\r\n\r\n// Shared function to handle chart download (Bonus Requirement)\r\nconst handleChartDownload = (chartRef, filename) => {\r\n    const chartInstance = chartRef.current;\r\n    \r\n    if (chartInstance && chartInstance.toBase64Image) {\r\n        const imageURL = chartInstance.toBase64Image('image/png', 1.0);\r\n        \r\n        const a = document.createElement('a');\r\n        a.href = imageURL;\r\n        a.download = `${filename}.png`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n    }\r\n};\r\n\r\n// Common function for chart options\r\nconst getChartOptions = (title, yAxesId) => {\r\n    const isDark = document.documentElement.classList.contains('dark');\r\n    const color = isDark ? 'rgb(156, 163, 175)' : 'rgb(107, 114, 128)';\r\n    const gridColor = 'rgba(209, 213, 219, 0.1)';\r\n\r\n    return {\r\n        responsive: true,\r\n        maintainAspectRatio: false,\r\n        plugins: {\r\n            legend: {\r\n                position: 'top',\r\n                labels: { color: color }\r\n            },\r\n            title: {\r\n                display: true,\r\n                text: title,\r\n                color: isDark ? 'rgb(209, 213, 219)' : 'rgb(55, 65, 81)'\r\n            },\r\n        },\r\n        scales: {\r\n            x: {\r\n                title: { display: true, text: 'Year', color: color },\r\n                ticks: { color: color },\r\n                grid: { color: gridColor }\r\n            },\r\n            yRate: {\r\n                type: 'linear',\r\n                display: true,\r\n                position: 'left',\r\n                title: { display: true, text: 'Avg Rate (INR)', color: CHART_COLORS[0] },\r\n                ticks: { color: color },\r\n                grid: { color: gridColor }\r\n            },\r\n            yDemand: {\r\n                type: 'linear',\r\n                display: yAxesId === 'yDemand', // Only show demand axis if needed\r\n                position: 'right',\r\n                title: { display: true, text: 'Demand (Units)', color: CHART_COLORS[1] },\r\n                ticks: { color: color },\r\n                grid: { drawOnChartArea: false }\r\n            },\r\n        }\r\n    };\r\n};\r\n\r\n// Component for Single Area Analysis (Rates + Demand on one chart)\r\nconst TrendChart = ({ chart, areaName }) => { \r\n    const chartRef = useRef(null); \r\n\r\n    if (!chart || !chart.years || chart.years.length === 0) {\r\n        return <div className=\"p-8 bg-white dark:bg-gray-800 shadow-xl rounded-xl text-center text-gray-500 dark:text-gray-400\">No trend data available for this query.</div>;\r\n    }\r\n\r\n    const chartData = {\r\n        labels: chart.years,\r\n        datasets: [\r\n            {\r\n                label: \"Weighted Avg Rate (INR)\",\r\n                data: chart.rates.overall,\r\n                borderColor: CHART_COLORS[0],\r\n                backgroundColor: 'rgba(79, 70, 229, 0.2)',\r\n                borderWidth: 3,\r\n                tension: 0.3,\r\n                yAxisID: 'yRate',\r\n            },\r\n            {\r\n                label: \"Total Demand (Units Sold)\",\r\n                data: chart.demand,\r\n                borderColor: CHART_COLORS[1],\r\n                backgroundColor: 'rgba(239, 68, 68, 0.2)',\r\n                borderWidth: 3,\r\n                tension: 0.3,\r\n                yAxisID: 'yDemand',\r\n            },\r\n        ],\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white dark:bg-gray-800 shadow-xl rounded-xl p-6 mb-8 border border-indigo-400/50 transition-colors duration-300\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h3 className=\"text-xl font-semibold text-gray-800 dark:text-gray-200\">Price & Demand Trends</h3>\r\n                <button\r\n                    onClick={() => handleChartDownload(chartRef, `${areaName}_trend_chart`)}\r\n                    className=\"px-4 py-2 text-sm rounded-lg text-white bg-green-600 hover:bg-green-700 transition duration-150 flex items-center shadow-md\"\r\n                >\r\n                    <FaDownload className=\"w-4 h-4 mr-2\" /> Download Chart (PNG)\r\n                </button>\r\n            </div>\r\n            <div className=\"h-[400px] w-full\">\r\n                <Line ref={chartRef} data={chartData} options={getChartOptions(`Price & Demand Trends for ${areaName}`, 'yDemand')} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Component for Multi-Area Comparison \r\nconst ComparisonChart = ({ multiChartData, areaNames }) => {\r\n    const chartRef = useRef(null);\r\n    \r\n    if (!multiChartData || multiChartData.length < 2) {\r\n        return <div className=\"p-8 bg-white dark:bg-gray-800 shadow-xl rounded-xl text-center text-gray-500 dark:text-gray-400\">Not enough data for comparison.</div>;\r\n    }\r\n\r\n    const allYears = multiChartData.flatMap(d => d.chart.years);\r\n    const uniqueYears = Array.from(new Set(allYears)).sort((a, b) => parseInt(a) - parseInt(b));\r\n    \r\n    const datasets = multiChartData.map((data, index) => {\r\n        const rates = data.chart.rates.overall || [];\r\n        const areaYears = data.chart.years;\r\n        \r\n        const rateMap = new Map(areaYears.map((year, i) => [year, rates[i]]));\r\n        const dataPoints = uniqueYears.map(year => rateMap.get(year) || null);\r\n\r\n        const colorIndex = index % CHART_COLORS.length;\r\n\r\n        return {\r\n            label: `${data.area} - Avg Rate`,\r\n            data: dataPoints,\r\n            borderColor: CHART_COLORS[colorIndex],\r\n            backgroundColor: CHART_COLORS[colorIndex].replace('rgb', 'rgba').replace(')', ', 0.2)'),\r\n            borderWidth: 3,\r\n            tension: 0.3,\r\n            yAxisID: 'yRate',\r\n        };\r\n    });\r\n\r\n    const chartData = {\r\n        labels: uniqueYears,\r\n        datasets: datasets,\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white dark:bg-gray-800 shadow-xl rounded-xl p-6 mb-8 border border-indigo-400/50 transition-colors duration-300\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h3 className=\"text-xl font-semibold text-gray-800 dark:text-gray-200\">Price Comparison: {areaNames.join(' vs ')}</h3>\r\n                <button\r\n                    onClick={() => handleChartDownload(chartRef, 'multi_area_comparison')}\r\n                    className=\"px-4 py-2 text-sm rounded-lg text-white bg-green-600 hover:bg-green-700 transition duration-150 flex items-center shadow-md\"\r\n                >\r\n                    <FaDownload className=\"w-4 h-4 mr-2\" /> Download Chart (PNG)\r\n                </button>\r\n            </div>\r\n            <div className=\"h-[400px] w-full\">\r\n                <Line ref={chartRef} data={chartData} options={getChartOptions(`Price Trends Comparison`, 'yRate')} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// DataTable Component (Includes Download Table Button)\r\nconst DataTable = ({ table }) => {\r\n    if (!table || table.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    const headers = Object.keys(table[0]).filter(key => key !== 'id');\r\n\r\n    // Function to handle table download as CSV (Bonus Requirement)\r\n    const handleDownloadCSV = () => {\r\n        let csvContent = headers.map(h => `\"${h.split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')}\"`).join(',') + '\\n';\r\n        \r\n        table.forEach(row => {\r\n            const rowData = headers.map(header => {\r\n                let value = row[header];\r\n                if (value === undefined || value === null) value = '';\r\n                return `\"${String(value).replace(/\"/g, '\"\"')}\"`;\r\n            }).join(',');\r\n            csvContent += rowData + '\\n';\r\n        });\r\n\r\n        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n        const link = document.createElement(\"a\");\r\n        const url = URL.createObjectURL(blob);\r\n        link.setAttribute(\"href\", url);\r\n        link.setAttribute(\"download\", \"real_estate_data_details.csv\");\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"bg-white dark:bg-gray-800 shadow-xl rounded-xl p-6 border border-indigo-400/50 transition-colors duration-300 overflow-x-auto\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h3 className=\"text-xl font-semibold text-gray-800 dark:text-gray-200\">Filtered Detailed Data</h3>\r\n                 <button\r\n                    onClick={handleDownloadCSV}\r\n                    className=\"px-4 py-2 text-sm rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 transition duration-150 flex items-center shadow-md\"\r\n                >\r\n                    <FaDownload className=\"w-4 h-4 mr-2\" /> Download Table (CSV)\r\n                </button>\r\n            </div>\r\n            <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\r\n                <thead className=\"bg-indigo-50 dark:bg-gray-700\">\r\n                    <tr>\r\n                        {headers.map((header) => (\r\n                            <th\r\n                                key={header}\r\n                                className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\"\r\n                            >\r\n                                {/* Display headers nicely by capitalizing words */}\r\n                                {header.split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')}\r\n                            </th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n                <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n                    {table.map((row, rowIndex) => (\r\n                        <tr key={rowIndex} className=\"hover:bg-indigo-50/50 dark:hover:bg-gray-700/50 transition-colors duration-150\">\r\n                            {headers.map((header) => (\r\n                                <td key={header} className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100\">\r\n                                    {row[header] === undefined || row[header] === null ? '-' : String(row[header])}\r\n                                </td>\r\n                            ))}\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// --- 3. Main Application Component (App) ---\r\nconst App = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [summary, setSummary] = useState(\"\");\r\n    const [singleChartData, setSingleChartData] = useState(null);\r\n    const [comparisonData, setComparisonData] = useState(null); // New state for multi-area data\r\n    const [tableData, setTableData] = useState([]);\r\n    const [areaName, setAreaName] = useState(\"\");\r\n    const [error, setError] = useState(null);\r\n    const [isDark, setIsDark] = useState(true);\r\n    const [notification, setNotification] = useState(null); // State for upload messages\r\n\r\n    // Initial dark mode setup (using Tailwind's dark class)\r\n    useEffect(() => {\r\n        document.documentElement.classList.toggle('dark', isDark);\r\n    }, [isDark]);\r\n\r\n    const toggleDark = () => setIsDark(prev => !prev);\r\n\r\n\r\n    const handleQuery = async (text) => {\r\n        setError(null);\r\n        setNotification(null); // Clear notification on new query\r\n        setLoading(true);\r\n        setAreaName(\"Processing...\");\r\n        setComparisonData(null); \r\n        setSingleChartData(null); \r\n        \r\n        try {\r\n            const res = await fetchQuery(text);\r\n\r\n            if (res.multi_chart_data) {\r\n                // Handle Comparison Response\r\n                setComparisonData(res.multi_chart_data);\r\n                setAreaName(`Comparison: ${res.comparison_areas.join(', ')}`);\r\n                setSummary(res.summary);\r\n                setTableData(res.table || []);\r\n            } else {\r\n                // Handle Single Area Response\r\n                setSingleChartData(res.chart);\r\n                setAreaName(res.area);\r\n                setSummary(res.summary);\r\n                setTableData(res.table);\r\n            }\r\n            \r\n        } catch (e) {\r\n            console.error(\"Query Error:\", e.message);\r\n            setError(e.message);\r\n            setSummary(\"Could not perform the analysis. Please check your Django backend logs for errors or ensure the area name is valid.\");\r\n            setTableData([]);\r\n            setAreaName(\"Error\");\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    // Notification UI component inside App\r\n    const NotificationToast = () => {\r\n        if (!notification) return null;\r\n        \r\n        const baseClass = \"fixed top-4 right-4 p-4 rounded-lg shadow-xl text-white flex items-center z-50 transition duration-300\";\r\n        let colorClass = \"\";\r\n        \r\n        if (notification.type === 'success') {\r\n            colorClass = \"bg-green-600 border border-green-800\";\r\n        } else if (notification.type === 'error') {\r\n            colorClass = \"bg-red-600 border border-red-800\";\r\n        } else {\r\n            colorClass = \"bg-indigo-600 border border-indigo-800\";\r\n        }\r\n        \r\n        return (\r\n            <div className={`${baseClass} ${colorClass}`}>\r\n                <FaTimesCircle className=\"mr-2 cursor-pointer\" onClick={() => setNotification(null)} />\r\n                <span>{notification.message}</span>\r\n            </div>\r\n        );\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex bg-gray-50 dark:bg-gray-900 font-sans transition-colors duration-300\">\r\n            <NotificationToast />\r\n\r\n            <Sidebar \r\n                isDark={isDark} \r\n                toggleDark={toggleDark} \r\n                setLoading={setLoading} \r\n                setNotification={setNotification} \r\n            />\r\n            <main className=\"flex-grow ml-64 p-8\">\r\n                <div className=\"max-w-7xl mx-auto\">\r\n                    \r\n                    {/* Header */}\r\n                    <header className=\"mb-10 pt-4\">\r\n                        <h2 className=\"text-3xl font-extrabold text-gray-900 dark:text-white\">Real Estate Market Dashboard</h2>\r\n                        <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">Ask a question to analyze trends for any locality in the dataset.</p>\r\n                    </header>\r\n\r\n                    {/* Query Box */}\r\n                    <QueryBox onSubmit={handleQuery} disabled={loading} />\r\n\r\n                    {/* Error Message */}\r\n                    {error && (\r\n                        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4 dark:bg-red-900/50 dark:border-red-600 dark:text-red-400\" role=\"alert\">\r\n                            <strong className=\"font-bold\">Error! </strong>\r\n                            <span className=\"block sm:inline\">{error}</span>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Content */}\r\n                    {loading ? (\r\n                        <Loader />\r\n                    ) : (\r\n                        <>\r\n                            {/* Initial Message */}\r\n                            {!areaName && !error && (\r\n                                <div className=\"p-8 text-center text-gray-500 dark:text-gray-400 border border-dashed border-gray-300 dark:border-gray-700 rounded-xl\">\r\n                                    <p className=\"text-xl\">Welcome! Submit a query like \"Analyze Wakad\" or \"Compare Ambegaon Budruk and Aundh\" to get started.</p>\r\n                                    <p className=\"mt-2 text-sm\">Make sure your Django server is running at *http://127.0.0.1:8000* and the *dataset.xlsx* file is accessible in your *data* folder.</p>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Results */}\r\n                            {areaName && areaName !== \"Processing...\" && areaName !== \"Error\" && (\r\n                                <>\r\n                                    <SummaryCard summary={summary} area={areaName} />\r\n                                    \r\n                                    {/* Conditional Chart Rendering */}\r\n                                    {comparisonData ? (\r\n                                        <ComparisonChart \r\n                                            multiChartData={comparisonData} \r\n                                            areaNames={areaName.replace('Comparison: ', '').split(', ')}\r\n                                        />\r\n                                    ) : (\r\n                                        <TrendChart chart={singleChartData} areaName={areaName} />\r\n                                    )}\r\n\r\n                                    {/* Table (only rendered for single analysis) */}\r\n                                    {!comparisonData && <DataTable table={tableData} />}\r\n                                </>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}